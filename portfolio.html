<!DOCTYPE html>

<html lang="en">

    <head>

        <title>General Banks</title>

        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Saira+Stencil+One&display=swap" rel="stylesheet">

        <link rel="stylesheet" href="https://pyscript.net/alpha/pyscript.css" />
        <script defer src="https://pyscript.net/alpha/pyscript.js"></script>

        <py-env>
        - numpy
        - matplotlib
        </py-env>

        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
        <link rel="stylesheet" href="./css/template.css">

    </head>

    <body class="portfolio-background">

        <!--Navbar-->

        <nav class="navbar">
            <div class="row">
                <div class="col-2">
                    <img src="./images/soldier2.jpg" height="180" class="nav-image" alt="army general">
                </div>
                <div class="navbar-brand col-6">
                    <header>General Banks</header>
                </div>
                <div class="col-3">
                    <ul class="nav">
                        <li class="nav-item">
                          <a class="nav-link active" aria-current="page" href="./login.html">Leave the battlefield (Logout)</a>
                        </li>
                        <li class="nav-item">
                          <a class="nav-link disabled" aria-disabled="true">Talk to command (Contact)</a>
                        </li>
                        <li class="nav-item">
                          <a class="nav-link disabled" aria-disabled="true">Change your combat gear (Settings)</a>
                        </li>
                      </ul>
                </div>
            </div>
        </nav>

        <div class="container text-center">
            <div class="row">
                <div class="col-4">
                    <img src="./images/army_squad6.jpg" height="180" alt="portfolio squad">
                </div>
                <div class="col-4 my-auto">
                    <h1 class="header">PORTFOLIO</h1>
                </div>
                <div class="col-4">
                    <img src="./images/army_squad6.jpg" height="180" alt="portfolio squad">
                </div>
            </div>        
        </div>
    


        <!--where the graph is rendered-->

        <div class="container text-center">
            <py-script type="py" src="./py/main.py" config="./pyscript.json"></py-script>
        </div>

        <script type="mpy">
            import main
        </script>

        <div id="plot"></div>

        
        
        <py-script output="plot">
            import matplotlib.pyplot as plt
            import numpy as np
            
            data = {'Alpha, Beta, & Charlie': 123381.38,
                    'Battlefield Maps': 112591.43,
                    'Explosives-4-Less': 112214.71,
                    'Guns-R-Us': 109438.50,
                    'Mission Control LLC': 104437.60,
                    'Oscar Mike Combat Wear': 100934.30,
                    'Proud Few Ltd': 103660.54,
                    'Search and Recruit': 137351.96,
                    'Transport Depot': 103569.59,
                    'We Will Defend': 135841.99}
            
            group_data = list(data.values())
            group_names = list(data.keys())
            group_mean = np.mean(group_data)

            # print(plt.style.available)
            plt.style.use('fivethirtyeight')
                        
            plt.rcParams.update({'figure.autolayout': True})
            
            def currency(x, pos):
                """The two arguments are the value and tick position"""
                if x >= 1e6:
                    s = f'${x*1e-6:1.1f}M'
                else:
                    s = f'${x*1e-3:1.0f}K'
                return s
            
            fig, ax = plt.subplots(figsize=(4, 8))
            ax.barh(group_names, group_data)
            labels = ax.get_xticklabels()
            plt.setp(labels, rotation=45, horizontalalignment='right')
            
            ax.axvline(group_mean, ls='--', color='r')
            
            for group in [3, 5, 8]:
                ax.text(145000, group, "New Company", fontsize=10,
                        verticalalignment="center")
            
            ax.title.set(y=1.05)
            
            ax.set(xlim=[-10000, 140000], xlabel='Total Revenue', ylabel='Company',
                   title='Company Revenue')
            ax.xaxis.set_major_formatter(currency)
            ax.set_xticks([0, 25e3, 50e3, 75e3, 100e3, 125e3])
            fig.subplots_adjust(right=.1)
            
            pyscript.write('plot', fig)    
        </py-script>

        <!--audio controls-->
        
        <div class="container text-center">
            <img src="./images/emblem2.jpg" alt="company logo" class="my-2">
            <section>
                <audio controls autoplay loop>
                    <source src="./audio/military-power-strong-action-trailer-for-war-film-intro-opener-212027.mp3" type="audio/mpeg">
                </audio>
            </section>
            <p>United Banking Federation:  proud to serve your finances</p>
        </div>
    
    </body>

</html>
